{{ define "main" }}
<div class="container">
    <!-- Hero Section -->
    <div class="hero">
        <h1 class="hero__title">{{ site.Title }}</h1>
        <p class="hero__description">{{ site.Params.description }}</p>
        <div class="hero__cta">
            <a href="#latest-posts" class="btn">Explore Articles</a>
            <a href="{{ " /about/" | relURL }}" class="btn btn--outline">About Us</a>
        </div>
    </div>

    <!-- Featured Article Section -->
    {{ $featuredPost := index (first 1 (where site.RegularPages "Section" "posts")) 0 }}
    {{ if $featuredPost }}
    <section class="featured-article">
        <div class="featured-article__header">
            <h2>Featured Article</h2>
            <span class="featured-article__badge">Latest</span>
        </div>

        <article class="featured-article__content">
            {{ if $featuredPost.Params.featured_image }}
            <div class="featured-article__image">
                <a href="{{ $featuredPost.Permalink }}">
                    <img src="{{ $featuredPost.Params.featured_image | relURL }}"
                        alt="{{ $featuredPost.Params.featured_image_alt | default $featuredPost.Title }}"
                        class="featured-article__img">
                </a>
            </div>
            {{ end }}

            <div class="featured-article__text">
                <div class="featured-article__meta">
                    <time datetime="{{ $featuredPost.Date.Format " 2006-01-02" }}">
                        {{ $featuredPost.Date.Format "January 2, 2006" }}
                    </time>
                    {{ if $featuredPost.ReadingTime }}
                    <span class="featured-article__separator">•</span>
                    <span class="featured-article__reading-time">{{ $featuredPost.ReadingTime }} min read</span>
                    {{ end }}
                </div>

                <h3 class="featured-article__title">
                    <a href="{{ $featuredPost.Permalink }}">{{ $featuredPost.Title }}</a>
                </h3>

                {{ if $featuredPost.Params.tags }}
                <div class="featured-article__tags">
                    {{ range first 4 $featuredPost.Params.tags }}
                    <span class="tag tag--large">{{ . }}</span>
                    {{ end }}
                </div>
                {{ end }}

                <p class="featured-article__excerpt">
                    {{ if $featuredPost.Description }}
                    {{ $featuredPost.Description }}
                    {{ else }}
                    {{ $featuredPost.Summary | truncate 200 }}
                    {{ end }}
                </p>

                <a href="{{ $featuredPost.Permalink }}" class="featured-article__link">
                    Read Full Article →
                </a>
            </div>
        </article>
    </section>
    {{ end }}

    <!-- Latest Posts Section -->
    <section class="posts" id="latest-posts">
        <div class="posts__header">
            <h2>Latest Articles</h2>
            <p class="posts__subtitle">Insights on financial technology, architecture, and innovation</p>
        </div>

        <div class="posts__grid">
            {{ range after 1 (first 7 (where site.RegularPages "Section" "posts")) }}
            <article class="post-card">
                {{ if .Params.featured_image }}
                <div class="post-card__image">
                    <a href="{{ .Permalink }}">
                        <img src="{{ .Params.featured_image | relURL }}"
                            alt="{{ .Params.featured_image_alt | default .Title }}" class="post-card__img">
                    </a>
                </div>
                {{ end }}

                <div class="post-card__content">
                    <h3 class="post-card__title">
                        <a href="{{ .Permalink }}">{{ .Title }}</a>
                    </h3>

                    <div class="post-card__meta">
                        <time datetime="{{ .Date.Format " 2006-01-02" }}">
                            {{ .Date.Format "January 2, 2006" }}
                        </time>
                        {{ if .ReadingTime }}
                        <span class="post-card__separator">•</span>
                        <span class="post-card__reading-time">{{ .ReadingTime }} min read</span>
                        {{ end }}
                        {{ if .Params.tags }}
                        <div class="post-card__tags">
                            {{ range first 3 .Params.tags }}
                            <span class="tag">{{ . }}</span>
                            {{ end }}
                        </div>
                        {{ end }}
                    </div>

                    {{ if .Description }}
                    <p class="post-card__excerpt">{{ .Description }}</p>
                    {{ else }}
                    <p class="post-card__excerpt">{{ .Summary | truncate 150 }}</p>
                    {{ end }}

                    <a href="{{ .Permalink }}" class="post-card__link">
                        Read more →
                    </a>
                </div>
            </article>
            {{ end }}
        </div>

        {{ if gt (len (where site.RegularPages "Section" "posts")) 7 }}
        <div class="posts__footer">
            <a href="{{ " /posts/" | relURL }}" class="btn">View All Articles</a>
        </div>
        {{ end }}
    </section>

    <!-- Newsletter Section -->
    <section class="newsletter">
        <div class="newsletter__content">
            <h2 class="newsletter__title">Stay Updated</h2>
            <p class="newsletter__description">
                Get the latest insights on financial technology, architecture patterns, and industry trends delivered to
                your inbox.
            </p>
            <div class="newsletter__form">
                <input type="email" placeholder="Enter your email address" class="newsletter__input">
                <button type="submit" class="btn newsletter__button">Subscribe</button>
            </div>
            <p class="newsletter__disclaimer">
                No spam, unsubscribe at any time. Read our <a href="/privacy">privacy policy</a>.
            </p>
        </div>
    </section>
</div>
{{ end }}